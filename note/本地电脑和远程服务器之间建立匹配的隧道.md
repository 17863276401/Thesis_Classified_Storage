# 本地电脑和远程服务器之间建立匹配的隧道



### 第一步：在本地建立 SSH 隧道

在你**自己的电脑**（Windows 的 PowerShell 或 Mac/Linux 的 Terminal）上，输入以下命令：

Bash

```
ssh -L 8888:localhost:8888 ubuntu2204@192.168.6.79
```

### 第二步：保持窗口运行

输入密码登录成功后，你会看到和之前一样的 Ubuntu 欢迎界面。**请把这个窗口放在一边，不要关闭它，也不要在这个窗口里按 Ctrl+C。** 这个窗口现在就是你的“数据传送通道”。

### 第三步：在浏览器输入带 Token 的地址

打开你本地的浏览器（Chrome、Edge 等），直接复制并粘贴下面的链接：

```
http://localhost:8888/tree?token=93e091f6f347a970e80a165332374281dbdcf0673d3270c1
```

## 如果没有这样的连接：

如果没有生成带 `token` 的链接，通常是因为 Jupyter 检测到你之前已经配置过密码，或者它因为某种原因（比如端口被彻底封死）并没有真正进入运行状态。

我们来一步步解决，手动把 `token` 给找出来。

### 1. 查找当前运行中的 Token

在服务器终端（显示 `(my_dl)...$` 的那个窗口），直接输入以下命令：

Bash

```
jupyter notebook list
```

**会有两种结果：**

- **结果 A**：显示 `http://localhost:8888/?token=...`。这就拿到了！直接复制它。
- **结果 B**：显示 `Currently running servers: None`。说明 Jupyter 根本没跑起来。

------

### 2. 如果显示 `None` (Jupyter 没跑起来)

请重新在服务器执行这一行命令（这一行最稳）：

Bash

```
jupyter notebook --no-browser --port=8888 --ip=127.0.0.1
```

如果它还是没打印出 `token` 链接，请看屏幕最后几行，它可能会提示 `Config file ... loaded`。

------

### 3. 如果还是没有 Token (重置 Token 模式)

有时候配置文件会干扰 Token 的显示。你可以通过下面的命令**强制**它生成一个新的 Token 并启动：

Bash

```
jupyter notebook --no-browser --port=8888 --NotebookApp.token='123456'
```

**操作方法：**

1. 运行完这个命令。
2. 只要它没报错，你就在本地浏览器直接访问：`http://localhost:8888/?token=123456`

------

### 4. 终极排查：检查本地隧道

如果在执行 `ssh -L 8888:localhost:8888...` 的那个**本地终端**里，你看到了如下错误： `channel 1: open failed: connect failed: Connection refused`

这说明虽然隧道建好了，但服务器那边没人接应。请务必确认：

- 你在服务器上执行完 `jupyter` 命令后，**没有**按 `Ctrl+C` 关掉它。
- 服务器终端停留在那一堆日志界面没动。